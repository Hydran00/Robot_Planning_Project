<?xml version='1.0'?>
<robot name="my_robot">

  <static>false</static>
  <link name='chassis'>
    <!--<pose>0 0 .25 0 0 0</pose>-->
    <origin rpy='0 0 0' xyz='0 0 .25'/>
    
    <inertial>
      <mass value="20"/>
      <!-- <pose>0 0 -0.125 0 0 0</pose> -->
      <origin rpy='0 0 0' xyz='0 0 -0.125'/>
      <!-- <inertia>
        <ixx>0.8</ixx>
        <ixy>0</ixy>
        <ixz>0</ixz>
        <iyy>0.8</iyy>
        <iyz>0</iyz>
        <izz>0.8</izz>
      </inertia> -->
       <inertia ixx="0.8" ixy="0.0" ixz="0.0" iyy="0.8" iyz="0.0" izz="0.8"/>
    </inertial>

    <collision name='collision'>
      <geometry>
        <box size=".5 .5 .4">
          <!-- <size>.5 .5 .4</size> -->
        </box>
      </geometry>
    </collision>

    <visual name='visual'>
      <geometry>
        <box size=".5 .5 .4">
          <!-- <size>.5 .5 .4</size> -->
        </box>
      </geometry>

      <material name="chassis_blue">
        <color rgba="0.15 0.15 0.85 1"/>
      </material>
      <!-- <material>
        <ambient>0.15 0.15 0.85 1</ambient>
        <diffuse>0.2 0.2 0.92 1</diffuse>
        <specular>0.25 0.25 0.97 1</specular>
        <emissive>0.01 0.01 0.01 1</emissive>
      </material> -->

    </visual>

    <collision name='caster_collision_1'>
      <!-- <pose>-0.2 0 -0.225 0 0 0</pose> -->
      <origin rpy='0 0 0' xyz='-0.2 0 -0.225'/>
      <geometry>
        <box size=".1 .1 .05">
          <!-- <size>.1 .1 .05</size> -->
        </box>
      </geometry>

      <surface>
        <friction>
          <ode>
            <mu>0.0</mu>
            <mu2>0.0</mu2>
            <slip1>0.0</slip1>
            <slip2>0.0</slip2>
          </ode>
        </friction>
      </surface>
    </collision>

    <visual name='caster_visual_1'>
      <!-- <pose>-0.2 0 -0.2 0 0 0</pose> -->
      <origin rpy='0 0 0' xyz='-0.2 0 -0.2'/>
      <geometry>
        <sphere radius=".05">
          <!-- <radius>.05</radius> -->
        </sphere>
      </geometry>
      <material name="caster_gray">
        <color rgba="0.15 0.15 0.15 1"/>
      </material>
      <!-- <material>
        <ambient>0.15 0.15 0.15 1</ambient>
        <diffuse>0.25 0.25 0.25 1</diffuse>
        <specular>0.99 0.99 0.99 1</specular>
        <emissive>0.2 0.2 0.2 1</emissive>
      </material> -->
    </visual>
    
    <collision name='caster_collision_2'>
      <!-- <pose>0.2 0 -0.225 0 0 0</pose> -->
      <origin rpy='0 0 0' xyz='0.2 0 -0.225'/>
      <geometry>
        <box size=".1 .1 .05">
          <!-- <size>.1 .1 .05</size> -->
        </box>
      </geometry>

      <surface>
        <friction>
          <ode>
            <mu>0.0</mu>
            <mu2>0.0</mu2>
            <slip1>0.0</slip1>
            <slip2>0.0</slip2>
          </ode>
        </friction>
      </surface>
    </collision>
    
    <visual name='caster_visual_2'>
      <!-- <pose>0.2 0 -0.2 0 0 0</pose> -->
      <origin rpy='0 0 0' xyz='0.2 0 -0.2'/>
      <geometry>
        <sphere radius=".05">
          <!-- <radius>.05</radius> -->
        </sphere>
      </geometry>
      <material name="caster_gray">
        <color rgba="0.15 0.15 0.15 1"/>
      </material>
      <!-- <material>
        <ambient>0.15 0.15 0.15 1</ambient>
        <diffuse>0.25 0.25 0.25 1</diffuse>
        <specular>0.99 0.99 0.99 1</specular>
        <emissive>0.2 0.2 0.2 1</emissive>
      </material> -->
    </visual>
    
    
  </link>

  
  <link name="left_wheel">
    <!-- <pose>0 0.27 0.125 0 1.5707 1.5707</pose> -->
    <origin rpy='0 1.5707 1.5707' xyz='0 0.27 0.125'/>

    <!-- <inertial>
      <mass>1.0</mass>
      <inertia>
        <ixx>0.006</ixx>
        <ixy>0</ixy>
        <ixz>0</ixz>
        <iyy>0.006</iyy>
        <iyz>0</iyz>
        <izz>0.006</izz>
      </inertia>
    </inertial> -->
    
    <collision name="collision">
      <geometry>
        <cylinder radius="0.125" length="0.03">
          <!-- <radius>.125</radius>
          <length>.03</length> -->
        </cylinder>
      </geometry>
      <surface>
        <friction>
          <ode>
            <mu>0.8</mu>
            <mu2>0.8</mu2>
            <slip1>0.0</slip1>
            <slip2>0.0</slip2>
          </ode>
        </friction>
      </surface>
    </collision>
    <visual name="visual">
      <geometry>
       <cylinder radius="0.125" length="0.03">
          <!-- <radius>.125</radius>
          <length>.03</length> -->
        </cylinder>
      </geometry>
      <!-- <material>
        <ambient>0.01 0.01 0.01 1</ambient>
        <diffuse>0.15 0.15 0.15 1</diffuse>
        <specular>0.99 0.99 0.99 1</specular>
        <emissive>0.01 0.01 0.01 1</emissive>
      </material> -->
      <material name="wheel_black">
        <color rgba="0.01 0.01 0.01 1"/>
      </material>
    </visual>
  </link>

  
  <link name="right_wheel">
    <!-- <pose>0 -0.27 0.125 0 1.5707 1.5707</pose> -->
    <origin rpy='0 1.5707 1.5707' xyz='0 -0.27 0.125'/>
    
    <!-- <inertial>
      <mass>1.0</mass>
      <inertia>
        <ixx>0.006</ixx>
        <ixy>0</ixy>
        <ixz>0</ixz>
        <iyy>0.006</iyy>
        <iyz>0</iyz>
        <izz>0.006</izz>
      </inertia>
    </inertial> -->
    
    <collision name="collision">
      <geometry>
        <cylinder radius="0.125" length="0.03">
          <!-- <radius>.125</radius>
          <length>.03</length> -->
        </cylinder>
      </geometry>
      <surface>
        <friction>
          <ode>
            <mu>0.8</mu>
            <mu2>0.8</mu2>
            <slip1>0.0</slip1>
            <slip2>0.0</slip2>
          </ode>
        </friction>
      </surface>
    </collision>
    <visual name="visual">
      <geometry>
        <cylinder radius="0.125" length="0.03">
          <!-- <radius>.125</radius>
          <length>.03</length> -->
        </cylinder>
      </geometry>
      <!-- <material>
        <ambient>0.01 0.01 0.01 1</ambient>
        <diffuse>0.15 0.15 0.15 1</diffuse>
        <specular>0.99 0.99 0.99 1</specular>
        <emissive>0.01 0.01 0.01 1</emissive>
      </material> -->
      <material name="wheel_black">
        <color rgba="0.01 0.01 0.01 1"/>
      </material>
    </visual>
  </link>


  <joint type="revolute" name="left_wheel_hinge">
    <pose>0 0 0.0 0 0 0</pose>
    <child link="left_wheel"></child>
    <parent link="chassis"></parent>
    <limit effort="100" velocity="10"/>
    <axis>
      <xyz>0 1 0</xyz>
      <dynamics>
        <!-- <damping>1.0</damping> -->
        <friction>1</friction>
      </dynamics>
    </axis>
  </joint>

  <joint type="revolute" name="right_wheel_hinge">
    <pose>0 0 0.0 0 0 0</pose>
    <child link="right_wheel"></child>
    <parent link="chassis"></parent>
    <limit effort="100" velocity="10"/>
    <axis>
      <xyz>0 1 0</xyz>
      <dynamics>
        <!-- <damping>1.0</damping> -->
        <friction>1</friction>
      </dynamics>
    </axis>
  </joint>

  <include>
    <uri>model://lidar2d</uri>
    <pose>0.2 0 0.45 0 0 0</pose>
  </include>
  <joint name="lidar2d_joint" type="fixed">
    <child link="lidar2d::lidar_link"></child>
    <parent link="chassis"></parent>
  </joint>

  <plugin name="differential_drive_controller" filename="libgazebo_ros_diff_drive.so">
    <alwaysOn>true</alwaysOn>
    <updateRate>20</updateRate>
    <leftJoint>left_wheel_hinge</leftJoint>
    <rightJoint>right_wheel_hinge</rightJoint>
    <wheelSeparation>0.54</wheelSeparation>
    <wheelDiameter>0.25</wheelDiameter>
    <torque>20</torque>
    <commandTopic>cmd_vel</commandTopic>
    <odometryTopic>odom</odometryTopic>
    <odometryFrame>odom</odometryFrame>
    <robotBaseFrame>base_footprint</robotBaseFrame>
  </plugin>

</robot>
