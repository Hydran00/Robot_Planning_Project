\hypertarget{zmq_8hpp_source}{}\doxysection{zmq.\+hpp}
\label{zmq_8hpp_source}\index{X:/shelfino\_node/include/zmq.hpp@{X:/shelfino\_node/include/zmq.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*}}
\DoxyCodeLine{2 \textcolor{comment}{    Copyright (c) 2009-\/2011 250bpm s.r.o.}}
\DoxyCodeLine{3 \textcolor{comment}{    Copyright (c) 2011 Botond Ballo}}
\DoxyCodeLine{4 \textcolor{comment}{    Copyright (c) 2007-\/2009 iMatix Corporation}}
\DoxyCodeLine{5 \textcolor{comment}{}}
\DoxyCodeLine{6 \textcolor{comment}{    Permission is hereby granted, free of charge, to any person obtaining a copy}}
\DoxyCodeLine{7 \textcolor{comment}{    of this software and associated documentation files (the "{}Software"{}), to}}
\DoxyCodeLine{8 \textcolor{comment}{    deal in the Software without restriction, including without limitation the}}
\DoxyCodeLine{9 \textcolor{comment}{    rights to use, copy, modify, merge, publish, distribute, sublicense, and/or}}
\DoxyCodeLine{10 \textcolor{comment}{    sell copies of the Software, and to permit persons to whom the Software is}}
\DoxyCodeLine{11 \textcolor{comment}{    furnished to do so, subject to the following conditions:}}
\DoxyCodeLine{12 \textcolor{comment}{}}
\DoxyCodeLine{13 \textcolor{comment}{    The above copyright notice and this permission notice shall be included in}}
\DoxyCodeLine{14 \textcolor{comment}{    all copies or substantial portions of the Software.}}
\DoxyCodeLine{15 \textcolor{comment}{}}
\DoxyCodeLine{16 \textcolor{comment}{    THE SOFTWARE IS PROVIDED "{}AS IS"{}, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR}}
\DoxyCodeLine{17 \textcolor{comment}{    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,}}
\DoxyCodeLine{18 \textcolor{comment}{    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE}}
\DoxyCodeLine{19 \textcolor{comment}{    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER}}
\DoxyCodeLine{20 \textcolor{comment}{    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING}}
\DoxyCodeLine{21 \textcolor{comment}{    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS}}
\DoxyCodeLine{22 \textcolor{comment}{    IN THE SOFTWARE.}}
\DoxyCodeLine{23 \textcolor{comment}{*/}}
\DoxyCodeLine{24 }
\DoxyCodeLine{25 \textcolor{preprocessor}{\#ifndef \_\_ZMQ\_HPP\_INCLUDED\_\_}}
\DoxyCodeLine{26 \textcolor{preprocessor}{\#define \_\_ZMQ\_HPP\_INCLUDED\_\_}}
\DoxyCodeLine{27 }
\DoxyCodeLine{28 \textcolor{preprocessor}{\#include <zmq.h>}}
\DoxyCodeLine{29 }
\DoxyCodeLine{30 \textcolor{preprocessor}{\#include <algorithm>}}
\DoxyCodeLine{31 \textcolor{preprocessor}{\#include <cassert>}}
\DoxyCodeLine{32 \textcolor{preprocessor}{\#include <cstring>}}
\DoxyCodeLine{33 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{34 \textcolor{preprocessor}{\#include <exception>}}
\DoxyCodeLine{35 }
\DoxyCodeLine{36 \textcolor{comment}{//  Detect whether the compiler supports C++11 rvalue references.}}
\DoxyCodeLine{37 \textcolor{preprocessor}{\#if (defined(\_\_GNUC\_\_) \&\& (\_\_GNUC\_\_ > 4 || \(\backslash\)}}
\DoxyCodeLine{38 \textcolor{preprocessor}{      (\_\_GNUC\_\_ == 4 \&\& \_\_GNUC\_MINOR\_\_ > 2)) \&\& \(\backslash\)}}
\DoxyCodeLine{39 \textcolor{preprocessor}{      defined(\_\_GXX\_EXPERIMENTAL\_CXX0X\_\_))}}
\DoxyCodeLine{40 \textcolor{preprocessor}{    \#define ZMQ\_HAS\_RVALUE\_REFS}}
\DoxyCodeLine{41 \textcolor{preprocessor}{    \#define ZMQ\_DELETED\_FUNCTION = delete}}
\DoxyCodeLine{42 \textcolor{preprocessor}{\#elif defined(\_\_clang\_\_)}}
\DoxyCodeLine{43 \textcolor{preprocessor}{    \#if \_\_has\_feature(cxx\_rvalue\_references)}}
\DoxyCodeLine{44 \textcolor{preprocessor}{        \#define ZMQ\_HAS\_RVALUE\_REFS}}
\DoxyCodeLine{45 \textcolor{preprocessor}{    \#endif}}
\DoxyCodeLine{46 }
\DoxyCodeLine{47 \textcolor{preprocessor}{    \#if \_\_has\_feature(cxx\_deleted\_functions)}}
\DoxyCodeLine{48 \textcolor{preprocessor}{        \#define ZMQ\_DELETED\_FUNCTION = delete}}
\DoxyCodeLine{49 \textcolor{preprocessor}{    \#else}}
\DoxyCodeLine{50 \textcolor{preprocessor}{        \#define ZMQ\_DELETED\_FUNCTION}}
\DoxyCodeLine{51 \textcolor{preprocessor}{    \#endif}}
\DoxyCodeLine{52 \textcolor{preprocessor}{\#elif defined(\_MSC\_VER) \&\& (\_MSC\_VER >= 1600)}}
\DoxyCodeLine{53 \textcolor{preprocessor}{    \#define ZMQ\_HAS\_RVALUE\_REFS}}
\DoxyCodeLine{54 \textcolor{preprocessor}{    \#define ZMQ\_DELETED\_FUNCTION}}
\DoxyCodeLine{55 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{56 \textcolor{preprocessor}{    \#define ZMQ\_DELETED\_FUNCTION}}
\DoxyCodeLine{57 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{58 }
\DoxyCodeLine{59 \textcolor{preprocessor}{\#if ZMQ\_VERSION >= ZMQ\_MAKE\_VERSION(3, 3, 0)}}
\DoxyCodeLine{60 \textcolor{preprocessor}{\#define ZMQ\_NEW\_MONITOR\_EVENT\_LAYOUT}}
\DoxyCodeLine{61 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{62 }
\DoxyCodeLine{63 \textcolor{preprocessor}{\#if ZMQ\_VERSION >= ZMQ\_MAKE\_VERSION(4, 1, 0)}}
\DoxyCodeLine{64 \textcolor{preprocessor}{\#define ZMQ\_HAS\_PROXY\_STEERABLE}}
\DoxyCodeLine{65 \textcolor{comment}{/*  Socket event data  */}}
\DoxyCodeLine{66 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{67     uint16\_t event;  \textcolor{comment}{// id of the event as bitfield}}
\DoxyCodeLine{68     int32\_t  value ; \textcolor{comment}{// value is either error code, fd or reconnect interval}}
\DoxyCodeLine{69 \} \mbox{\hyperlink{structzmq__event__t}{zmq\_event\_t}};}
\DoxyCodeLine{70 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{71 }
\DoxyCodeLine{72 \textcolor{comment}{// In order to prevent unused variable warnings when building in non-\/debug}}
\DoxyCodeLine{73 \textcolor{comment}{// mode use this macro to make assertions.}}
\DoxyCodeLine{74 \textcolor{preprocessor}{\#ifndef NDEBUG}}
\DoxyCodeLine{75 \textcolor{preprocessor}{\#   define ZMQ\_ASSERT(expression) assert(expression)}}
\DoxyCodeLine{76 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{77 \textcolor{preprocessor}{\#   define ZMQ\_ASSERT(expression) (void)(expression)}}
\DoxyCodeLine{78 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{79 }
\DoxyCodeLine{80 \textcolor{keyword}{namespace }zmq}
\DoxyCodeLine{81 \{}
\DoxyCodeLine{82 }
\DoxyCodeLine{83     \textcolor{keyword}{typedef} zmq\_free\_fn free\_fn;}
\DoxyCodeLine{84     \textcolor{keyword}{typedef} zmq\_pollitem\_t pollitem\_t;}
\DoxyCodeLine{85 }
\DoxyCodeLine{86     \textcolor{keyword}{class }\mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} : \textcolor{keyword}{public} std::exception}
\DoxyCodeLine{87     \{}
\DoxyCodeLine{88     \textcolor{keyword}{public}:}
\DoxyCodeLine{89 }
\DoxyCodeLine{90         \mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} () : errnum (zmq\_errno ()) \{\}}
\DoxyCodeLine{91 }
\DoxyCodeLine{92         \textcolor{keyword}{virtual} \textcolor{keyword}{const} \textcolor{keywordtype}{char} *what () \textcolor{keyword}{const} \textcolor{keywordflow}{throw} ()}
\DoxyCodeLine{93         \{}
\DoxyCodeLine{94             \textcolor{keywordflow}{return} zmq\_strerror (errnum);}
\DoxyCodeLine{95         \}}
\DoxyCodeLine{96 }
\DoxyCodeLine{97         \textcolor{keywordtype}{int} num ()\textcolor{keyword}{ const}}
\DoxyCodeLine{98 \textcolor{keyword}{        }\{}
\DoxyCodeLine{99             \textcolor{keywordflow}{return} errnum;}
\DoxyCodeLine{100         \}}
\DoxyCodeLine{101 }
\DoxyCodeLine{102     \textcolor{keyword}{private}:}
\DoxyCodeLine{103 }
\DoxyCodeLine{104         \textcolor{keywordtype}{int} errnum;}
\DoxyCodeLine{105     \};}
\DoxyCodeLine{106 }
\DoxyCodeLine{107     \textcolor{keyword}{inline} \textcolor{keywordtype}{int} poll (zmq\_pollitem\_t *items\_, \textcolor{keywordtype}{int} nitems\_, \textcolor{keywordtype}{long} timeout\_ = -\/1)}
\DoxyCodeLine{108     \{}
\DoxyCodeLine{109         \textcolor{keywordtype}{int} rc = zmq\_poll (items\_, nitems\_, timeout\_);}
\DoxyCodeLine{110         \textcolor{keywordflow}{if} (rc < 0)}
\DoxyCodeLine{111             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} ();}
\DoxyCodeLine{112         \textcolor{keywordflow}{return} rc;}
\DoxyCodeLine{113     \}}
\DoxyCodeLine{114 }
\DoxyCodeLine{115     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} proxy (\textcolor{keywordtype}{void} *frontend, \textcolor{keywordtype}{void} *backend, \textcolor{keywordtype}{void} *capture)}
\DoxyCodeLine{116     \{}
\DoxyCodeLine{117         \textcolor{keywordtype}{int} rc = zmq\_proxy (frontend, backend, capture);}
\DoxyCodeLine{118         \textcolor{keywordflow}{if} (rc != 0)}
\DoxyCodeLine{119             \textcolor{keywordflow}{throw} error\_t ();}
\DoxyCodeLine{120     \}}
\DoxyCodeLine{121     }
\DoxyCodeLine{122 \textcolor{preprocessor}{\#ifdef ZMQ\_HAS\_PROXY\_STEERABLE}}
\DoxyCodeLine{123     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} proxy\_steerable (\textcolor{keywordtype}{void} *frontend, \textcolor{keywordtype}{void} *backend, \textcolor{keywordtype}{void} *capture, \textcolor{keywordtype}{void} *control)}
\DoxyCodeLine{124     \{}
\DoxyCodeLine{125         \textcolor{keywordtype}{int} rc = zmq\_proxy\_steerable (frontend, backend, capture, control);}
\DoxyCodeLine{126         \textcolor{keywordflow}{if} (rc != 0)}
\DoxyCodeLine{127             \textcolor{keywordflow}{throw} error\_t ();}
\DoxyCodeLine{128     \}}
\DoxyCodeLine{129 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{130     }
\DoxyCodeLine{131     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} version (\textcolor{keywordtype}{int} *major\_, \textcolor{keywordtype}{int} *minor\_, \textcolor{keywordtype}{int} *patch\_)}
\DoxyCodeLine{132     \{}
\DoxyCodeLine{133         zmq\_version (major\_, minor\_, patch\_);}
\DoxyCodeLine{134     \}}
\DoxyCodeLine{135 }
\DoxyCodeLine{136     \textcolor{keyword}{class }\mbox{\hyperlink{classzmq_1_1message__t}{message\_t}}}
\DoxyCodeLine{137     \{}
\DoxyCodeLine{138         \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{classzmq_1_1socket__t}{socket\_t}};}
\DoxyCodeLine{139 }
\DoxyCodeLine{140     \textcolor{keyword}{public}:}
\DoxyCodeLine{141 }
\DoxyCodeLine{142         \textcolor{keyword}{inline} \mbox{\hyperlink{classzmq_1_1message__t}{message\_t}} ()}
\DoxyCodeLine{143         \{}
\DoxyCodeLine{144             \textcolor{keywordtype}{int} rc = zmq\_msg\_init (\&msg);}
\DoxyCodeLine{145             \textcolor{keywordflow}{if} (rc != 0)}
\DoxyCodeLine{146                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} ();}
\DoxyCodeLine{147         \}}
\DoxyCodeLine{148 }
\DoxyCodeLine{149         \textcolor{keyword}{inline} \textcolor{keyword}{explicit} \mbox{\hyperlink{classzmq_1_1message__t}{message\_t}} (\textcolor{keywordtype}{size\_t} size\_)}
\DoxyCodeLine{150         \{}
\DoxyCodeLine{151             \textcolor{keywordtype}{int} rc = zmq\_msg\_init\_size (\&msg, size\_);}
\DoxyCodeLine{152             \textcolor{keywordflow}{if} (rc != 0)}
\DoxyCodeLine{153                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} ();}
\DoxyCodeLine{154         \}}
\DoxyCodeLine{155 }
\DoxyCodeLine{156         \textcolor{keyword}{inline} \mbox{\hyperlink{classzmq_1_1message__t}{message\_t}} (\textcolor{keywordtype}{void} *data\_, \textcolor{keywordtype}{size\_t} size\_, free\_fn *ffn\_,}
\DoxyCodeLine{157             \textcolor{keywordtype}{void} *hint\_ = NULL)}
\DoxyCodeLine{158         \{}
\DoxyCodeLine{159             \textcolor{keywordtype}{int} rc = zmq\_msg\_init\_data (\&msg, data\_, size\_, ffn\_, hint\_);}
\DoxyCodeLine{160             \textcolor{keywordflow}{if} (rc != 0)}
\DoxyCodeLine{161                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} ();}
\DoxyCodeLine{162         \}}
\DoxyCodeLine{163 }
\DoxyCodeLine{164 \textcolor{preprocessor}{\#ifdef ZMQ\_HAS\_RVALUE\_REFS}}
\DoxyCodeLine{165         \textcolor{keyword}{inline} \mbox{\hyperlink{classzmq_1_1message__t}{message\_t}} (\mbox{\hyperlink{classzmq_1_1message__t}{message\_t}} \&\&rhs) : msg (rhs.msg)}
\DoxyCodeLine{166         \{}
\DoxyCodeLine{167             \textcolor{keywordtype}{int} rc = zmq\_msg\_init (\&rhs.msg);}
\DoxyCodeLine{168             \textcolor{keywordflow}{if} (rc != 0)}
\DoxyCodeLine{169                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} ();}
\DoxyCodeLine{170         \}}
\DoxyCodeLine{171 }
\DoxyCodeLine{172         \textcolor{keyword}{inline} \mbox{\hyperlink{classzmq_1_1message__t}{message\_t}} \&operator = (\mbox{\hyperlink{classzmq_1_1message__t}{message\_t}} \&\&rhs)}
\DoxyCodeLine{173         \{}
\DoxyCodeLine{174             std::swap (msg, rhs.msg);}
\DoxyCodeLine{175             \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{176         \}}
\DoxyCodeLine{177 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{178 }
\DoxyCodeLine{179         \textcolor{keyword}{inline} \mbox{\hyperlink{classzmq_1_1message__t}{\string~message\_t}} ()}
\DoxyCodeLine{180         \{}
\DoxyCodeLine{181             \textcolor{keywordtype}{int} rc = zmq\_msg\_close (\&msg);}
\DoxyCodeLine{182             ZMQ\_ASSERT (rc == 0);}
\DoxyCodeLine{183         \}}
\DoxyCodeLine{184 }
\DoxyCodeLine{185         \textcolor{keyword}{inline} \textcolor{keywordtype}{void} rebuild ()}
\DoxyCodeLine{186         \{}
\DoxyCodeLine{187             \textcolor{keywordtype}{int} rc = zmq\_msg\_close (\&msg);}
\DoxyCodeLine{188             \textcolor{keywordflow}{if} (rc != 0)}
\DoxyCodeLine{189                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} ();}
\DoxyCodeLine{190             rc = zmq\_msg\_init (\&msg);}
\DoxyCodeLine{191             \textcolor{keywordflow}{if} (rc != 0)}
\DoxyCodeLine{192                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} ();}
\DoxyCodeLine{193         \}}
\DoxyCodeLine{194 }
\DoxyCodeLine{195         \textcolor{keyword}{inline} \textcolor{keywordtype}{void} rebuild (\textcolor{keywordtype}{size\_t} size\_)}
\DoxyCodeLine{196         \{}
\DoxyCodeLine{197             \textcolor{keywordtype}{int} rc = zmq\_msg\_close (\&msg);}
\DoxyCodeLine{198             \textcolor{keywordflow}{if} (rc != 0)}
\DoxyCodeLine{199                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} ();}
\DoxyCodeLine{200             rc = zmq\_msg\_init\_size (\&msg, size\_);}
\DoxyCodeLine{201             \textcolor{keywordflow}{if} (rc != 0)}
\DoxyCodeLine{202                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} ();}
\DoxyCodeLine{203         \}}
\DoxyCodeLine{204 }
\DoxyCodeLine{205         \textcolor{keyword}{inline} \textcolor{keywordtype}{void} rebuild (\textcolor{keywordtype}{void} *data\_, \textcolor{keywordtype}{size\_t} size\_, free\_fn *ffn\_,}
\DoxyCodeLine{206             \textcolor{keywordtype}{void} *hint\_ = NULL)}
\DoxyCodeLine{207         \{}
\DoxyCodeLine{208             \textcolor{keywordtype}{int} rc = zmq\_msg\_close (\&msg);}
\DoxyCodeLine{209             \textcolor{keywordflow}{if} (rc != 0)}
\DoxyCodeLine{210                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} ();}
\DoxyCodeLine{211             rc = zmq\_msg\_init\_data (\&msg, data\_, size\_, ffn\_, hint\_);}
\DoxyCodeLine{212             \textcolor{keywordflow}{if} (rc != 0)}
\DoxyCodeLine{213                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} ();}
\DoxyCodeLine{214         \}}
\DoxyCodeLine{215 }
\DoxyCodeLine{216         \textcolor{keyword}{inline} \textcolor{keywordtype}{void} move (\mbox{\hyperlink{classzmq_1_1message__t}{message\_t}} *msg\_)}
\DoxyCodeLine{217         \{}
\DoxyCodeLine{218             \textcolor{keywordtype}{int} rc = zmq\_msg\_move (\&msg, \&(msg\_-\/>msg));}
\DoxyCodeLine{219             \textcolor{keywordflow}{if} (rc != 0)}
\DoxyCodeLine{220                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} ();}
\DoxyCodeLine{221         \}}
\DoxyCodeLine{222 }
\DoxyCodeLine{223         \textcolor{keyword}{inline} \textcolor{keywordtype}{void} copy (\mbox{\hyperlink{classzmq_1_1message__t}{message\_t}} *msg\_)}
\DoxyCodeLine{224         \{}
\DoxyCodeLine{225             \textcolor{keywordtype}{int} rc = zmq\_msg\_copy (\&msg, \&(msg\_-\/>msg));}
\DoxyCodeLine{226             \textcolor{keywordflow}{if} (rc != 0)}
\DoxyCodeLine{227                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} ();}
\DoxyCodeLine{228         \}}
\DoxyCodeLine{229 }
\DoxyCodeLine{230         \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} more ()}
\DoxyCodeLine{231         \{}
\DoxyCodeLine{232             \textcolor{keywordtype}{int} rc = zmq\_msg\_more (\&msg);}
\DoxyCodeLine{233             \textcolor{keywordflow}{return} rc != 0;}
\DoxyCodeLine{234         \}}
\DoxyCodeLine{235 }
\DoxyCodeLine{236         \textcolor{keyword}{inline} \textcolor{keywordtype}{void} *data ()}
\DoxyCodeLine{237         \{}
\DoxyCodeLine{238             \textcolor{keywordflow}{return} zmq\_msg\_data (\&msg);}
\DoxyCodeLine{239         \}}
\DoxyCodeLine{240 }
\DoxyCodeLine{241         \textcolor{keyword}{inline} \textcolor{keyword}{const} \textcolor{keywordtype}{void}* data ()\textcolor{keyword}{ const}}
\DoxyCodeLine{242 \textcolor{keyword}{        }\{}
\DoxyCodeLine{243             \textcolor{keywordflow}{return} zmq\_msg\_data (\textcolor{keyword}{const\_cast<}zmq\_msg\_t*\textcolor{keyword}{>}(\&msg));}
\DoxyCodeLine{244         \}}
\DoxyCodeLine{245 }
\DoxyCodeLine{246         \textcolor{keyword}{inline} \textcolor{keywordtype}{size\_t} size ()\textcolor{keyword}{ const}}
\DoxyCodeLine{247 \textcolor{keyword}{        }\{}
\DoxyCodeLine{248             \textcolor{keywordflow}{return} zmq\_msg\_size (\textcolor{keyword}{const\_cast<}zmq\_msg\_t*\textcolor{keyword}{>}(\&msg));}
\DoxyCodeLine{249         \}}
\DoxyCodeLine{250 }
\DoxyCodeLine{251     \textcolor{keyword}{private}:}
\DoxyCodeLine{252 }
\DoxyCodeLine{253         \textcolor{comment}{//  The underlying message}}
\DoxyCodeLine{254         zmq\_msg\_t msg;}
\DoxyCodeLine{255 }
\DoxyCodeLine{256         \textcolor{comment}{//  Disable implicit message copying, so that users won't use shared}}
\DoxyCodeLine{257         \textcolor{comment}{//  messages (less efficient) without being aware of the fact.}}
\DoxyCodeLine{258         \mbox{\hyperlink{classzmq_1_1message__t}{message\_t}} (\textcolor{keyword}{const} \mbox{\hyperlink{classzmq_1_1message__t}{message\_t}}\&);}
\DoxyCodeLine{259         \textcolor{keywordtype}{void} operator = (\textcolor{keyword}{const} \mbox{\hyperlink{classzmq_1_1message__t}{message\_t}}\&);}
\DoxyCodeLine{260     \};}
\DoxyCodeLine{261 }
\DoxyCodeLine{262     \textcolor{keyword}{class }\mbox{\hyperlink{classzmq_1_1context__t}{context\_t}}}
\DoxyCodeLine{263     \{}
\DoxyCodeLine{264         \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{classzmq_1_1socket__t}{socket\_t}};}
\DoxyCodeLine{265 }
\DoxyCodeLine{266     \textcolor{keyword}{public}:}
\DoxyCodeLine{267         \textcolor{keyword}{inline} \mbox{\hyperlink{classzmq_1_1context__t}{context\_t}} ()}
\DoxyCodeLine{268         \{}
\DoxyCodeLine{269             ptr = zmq\_ctx\_new ();}
\DoxyCodeLine{270             \textcolor{keywordflow}{if} (ptr == NULL)}
\DoxyCodeLine{271                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} ();}
\DoxyCodeLine{272         \}}
\DoxyCodeLine{273 }
\DoxyCodeLine{274 }
\DoxyCodeLine{275         \textcolor{keyword}{inline} \textcolor{keyword}{explicit} \mbox{\hyperlink{classzmq_1_1context__t}{context\_t}} (\textcolor{keywordtype}{int} io\_threads\_, \textcolor{keywordtype}{int} max\_sockets\_ = ZMQ\_MAX\_SOCKETS\_DFLT)}
\DoxyCodeLine{276         \{}
\DoxyCodeLine{277             ptr = zmq\_ctx\_new ();}
\DoxyCodeLine{278             \textcolor{keywordflow}{if} (ptr == NULL)}
\DoxyCodeLine{279                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} ();}
\DoxyCodeLine{280 }
\DoxyCodeLine{281             \textcolor{keywordtype}{int} rc = zmq\_ctx\_set (ptr, ZMQ\_IO\_THREADS, io\_threads\_);}
\DoxyCodeLine{282             ZMQ\_ASSERT (rc == 0);}
\DoxyCodeLine{283 }
\DoxyCodeLine{284             rc = zmq\_ctx\_set (ptr, ZMQ\_MAX\_SOCKETS, max\_sockets\_);}
\DoxyCodeLine{285             ZMQ\_ASSERT (rc == 0);}
\DoxyCodeLine{286         \}}
\DoxyCodeLine{287 }
\DoxyCodeLine{288 \textcolor{preprocessor}{\#ifdef ZMQ\_HAS\_RVALUE\_REFS}}
\DoxyCodeLine{289         \textcolor{keyword}{inline} \mbox{\hyperlink{classzmq_1_1context__t}{context\_t}} (\mbox{\hyperlink{classzmq_1_1context__t}{context\_t}} \&\&rhs) : ptr (rhs.ptr)}
\DoxyCodeLine{290         \{}
\DoxyCodeLine{291             rhs.ptr = NULL;}
\DoxyCodeLine{292         \}}
\DoxyCodeLine{293         \textcolor{keyword}{inline} \mbox{\hyperlink{classzmq_1_1context__t}{context\_t}} \&operator = (\mbox{\hyperlink{classzmq_1_1context__t}{context\_t}} \&\&rhs)}
\DoxyCodeLine{294         \{}
\DoxyCodeLine{295             std::swap (ptr, rhs.ptr);}
\DoxyCodeLine{296             \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{297         \}}
\DoxyCodeLine{298 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{299 }
\DoxyCodeLine{300         \textcolor{keyword}{inline} \mbox{\hyperlink{classzmq_1_1context__t}{\string~context\_t}} ()}
\DoxyCodeLine{301         \{}
\DoxyCodeLine{302             close();}
\DoxyCodeLine{303         \}}
\DoxyCodeLine{304 }
\DoxyCodeLine{305         \textcolor{keyword}{inline} \textcolor{keywordtype}{void} close()}
\DoxyCodeLine{306         \{}
\DoxyCodeLine{307             \textcolor{keywordflow}{if} (ptr == NULL)}
\DoxyCodeLine{308                 \textcolor{keywordflow}{return};}
\DoxyCodeLine{309             \textcolor{keywordtype}{int} rc = zmq\_ctx\_destroy (ptr);}
\DoxyCodeLine{310             ZMQ\_ASSERT (rc == 0);}
\DoxyCodeLine{311             ptr = NULL;}
\DoxyCodeLine{312         \}}
\DoxyCodeLine{313 }
\DoxyCodeLine{314         \textcolor{comment}{//  Be careful with this, it's probably only useful for}}
\DoxyCodeLine{315         \textcolor{comment}{//  using the C api together with an existing C++ api.}}
\DoxyCodeLine{316         \textcolor{comment}{//  Normally you should never need to use this.}}
\DoxyCodeLine{317         \textcolor{keyword}{inline} \textcolor{keyword}{operator} \textcolor{keywordtype}{void}* ()}
\DoxyCodeLine{318         \{}
\DoxyCodeLine{319             \textcolor{keywordflow}{return} ptr;}
\DoxyCodeLine{320         \}}
\DoxyCodeLine{321 }
\DoxyCodeLine{322     \textcolor{keyword}{private}:}
\DoxyCodeLine{323 }
\DoxyCodeLine{324         \textcolor{keywordtype}{void} *ptr;}
\DoxyCodeLine{325 }
\DoxyCodeLine{326         \mbox{\hyperlink{classzmq_1_1context__t}{context\_t}} (\textcolor{keyword}{const} \mbox{\hyperlink{classzmq_1_1context__t}{context\_t}}\&);}
\DoxyCodeLine{327         \textcolor{keywordtype}{void} operator = (\textcolor{keyword}{const} \mbox{\hyperlink{classzmq_1_1context__t}{context\_t}}\&);}
\DoxyCodeLine{328     \};}
\DoxyCodeLine{329 }
\DoxyCodeLine{330     \textcolor{keyword}{class }\mbox{\hyperlink{classzmq_1_1socket__t}{socket\_t}}}
\DoxyCodeLine{331     \{}
\DoxyCodeLine{332         \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{classzmq_1_1monitor__t}{monitor\_t}};}
\DoxyCodeLine{333     \textcolor{keyword}{public}:}
\DoxyCodeLine{334 }
\DoxyCodeLine{335         \textcolor{keyword}{inline} \mbox{\hyperlink{classzmq_1_1socket__t}{socket\_t}} (\mbox{\hyperlink{classzmq_1_1context__t}{context\_t}} \&context\_, \textcolor{keywordtype}{int} type\_)}
\DoxyCodeLine{336         \{}
\DoxyCodeLine{337             ctxptr = context\_.ptr;}
\DoxyCodeLine{338             ptr = zmq\_socket (context\_.ptr, type\_);}
\DoxyCodeLine{339             \textcolor{keywordflow}{if} (ptr == NULL)}
\DoxyCodeLine{340                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} ();}
\DoxyCodeLine{341         \}}
\DoxyCodeLine{342 }
\DoxyCodeLine{343 \textcolor{preprocessor}{\#ifdef ZMQ\_HAS\_RVALUE\_REFS}}
\DoxyCodeLine{344         \textcolor{keyword}{inline} \mbox{\hyperlink{classzmq_1_1socket__t}{socket\_t}}(\mbox{\hyperlink{classzmq_1_1socket__t}{socket\_t}}\&\& rhs) : ptr(rhs.ptr)}
\DoxyCodeLine{345         \{}
\DoxyCodeLine{346             rhs.ptr = NULL;}
\DoxyCodeLine{347         \}}
\DoxyCodeLine{348         \textcolor{keyword}{inline} \mbox{\hyperlink{classzmq_1_1socket__t}{socket\_t}}\& operator=(\mbox{\hyperlink{classzmq_1_1socket__t}{socket\_t}}\&\& rhs)}
\DoxyCodeLine{349         \{}
\DoxyCodeLine{350             std::swap(ptr, rhs.ptr);}
\DoxyCodeLine{351             \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{352         \}}
\DoxyCodeLine{353 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{354 }
\DoxyCodeLine{355         \textcolor{keyword}{inline} \mbox{\hyperlink{classzmq_1_1socket__t}{\string~socket\_t}} ()}
\DoxyCodeLine{356         \{}
\DoxyCodeLine{357             close();}
\DoxyCodeLine{358         \}}
\DoxyCodeLine{359 }
\DoxyCodeLine{360         \textcolor{keyword}{inline} \textcolor{keyword}{operator} \textcolor{keywordtype}{void}* ()}
\DoxyCodeLine{361         \{}
\DoxyCodeLine{362             \textcolor{keywordflow}{return} ptr;}
\DoxyCodeLine{363         \}}
\DoxyCodeLine{364 }
\DoxyCodeLine{365         \textcolor{keyword}{inline} \textcolor{keywordtype}{void} close()}
\DoxyCodeLine{366         \{}
\DoxyCodeLine{367             \textcolor{keywordflow}{if}(ptr == NULL)}
\DoxyCodeLine{368                 \textcolor{comment}{// already closed}}
\DoxyCodeLine{369                 return ;}
\DoxyCodeLine{370             \textcolor{keywordtype}{int} rc = zmq\_close (ptr);}
\DoxyCodeLine{371             ZMQ\_ASSERT (rc == 0);}
\DoxyCodeLine{372             ptr = 0 ;}
\DoxyCodeLine{373         \}}
\DoxyCodeLine{374 }
\DoxyCodeLine{375         \textcolor{keyword}{inline} \textcolor{keywordtype}{void} setsockopt (\textcolor{keywordtype}{int} option\_, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *optval\_,}
\DoxyCodeLine{376             \textcolor{keywordtype}{size\_t} optvallen\_)}
\DoxyCodeLine{377         \{}
\DoxyCodeLine{378             \textcolor{keywordtype}{int} rc = zmq\_setsockopt (ptr, option\_, optval\_, optvallen\_);}
\DoxyCodeLine{379             \textcolor{keywordflow}{if} (rc != 0)}
\DoxyCodeLine{380                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} ();}
\DoxyCodeLine{381         \}}
\DoxyCodeLine{382 }
\DoxyCodeLine{383         \textcolor{keyword}{inline} \textcolor{keywordtype}{void} getsockopt (\textcolor{keywordtype}{int} option\_, \textcolor{keywordtype}{void} *optval\_,}
\DoxyCodeLine{384             \textcolor{keywordtype}{size\_t} *optvallen\_)}
\DoxyCodeLine{385         \{}
\DoxyCodeLine{386             \textcolor{keywordtype}{int} rc = zmq\_getsockopt (ptr, option\_, optval\_, optvallen\_);}
\DoxyCodeLine{387             \textcolor{keywordflow}{if} (rc != 0)}
\DoxyCodeLine{388                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} ();}
\DoxyCodeLine{389         \}}
\DoxyCodeLine{390         }
\DoxyCodeLine{391         \textcolor{keyword}{inline} \textcolor{keywordtype}{void} bind (\textcolor{keyword}{const} \textcolor{keywordtype}{char} *addr\_)}
\DoxyCodeLine{392         \{}
\DoxyCodeLine{393             \textcolor{keywordtype}{int} rc = zmq\_bind (ptr, addr\_);}
\DoxyCodeLine{394             \textcolor{keywordflow}{if} (rc != 0)}
\DoxyCodeLine{395                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} ();}
\DoxyCodeLine{396         \}}
\DoxyCodeLine{397 }
\DoxyCodeLine{398         \textcolor{keyword}{inline} \textcolor{keywordtype}{void} unbind (\textcolor{keyword}{const} \textcolor{keywordtype}{char} *addr\_)}
\DoxyCodeLine{399         \{}
\DoxyCodeLine{400             \textcolor{keywordtype}{int} rc = zmq\_unbind (ptr, addr\_);}
\DoxyCodeLine{401             \textcolor{keywordflow}{if} (rc != 0)}
\DoxyCodeLine{402                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} ();}
\DoxyCodeLine{403         \}}
\DoxyCodeLine{404 }
\DoxyCodeLine{405         \textcolor{keyword}{inline} \textcolor{keywordtype}{void} connect (\textcolor{keyword}{const} \textcolor{keywordtype}{char} *addr\_)}
\DoxyCodeLine{406         \{}
\DoxyCodeLine{407             \textcolor{keywordtype}{int} rc = zmq\_connect (ptr, addr\_);}
\DoxyCodeLine{408             \textcolor{keywordflow}{if} (rc != 0)}
\DoxyCodeLine{409                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} ();}
\DoxyCodeLine{410         \}}
\DoxyCodeLine{411 }
\DoxyCodeLine{412         \textcolor{keyword}{inline} \textcolor{keywordtype}{void} disconnect (\textcolor{keyword}{const} \textcolor{keywordtype}{char} *addr\_)}
\DoxyCodeLine{413         \{}
\DoxyCodeLine{414             \textcolor{keywordtype}{int} rc = zmq\_disconnect (ptr, addr\_);}
\DoxyCodeLine{415             \textcolor{keywordflow}{if} (rc != 0)}
\DoxyCodeLine{416                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} ();}
\DoxyCodeLine{417         \}}
\DoxyCodeLine{418 }
\DoxyCodeLine{419         \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} connected()}
\DoxyCodeLine{420         \{}
\DoxyCodeLine{421             \textcolor{keywordflow}{return}(ptr != NULL);}
\DoxyCodeLine{422         \}}
\DoxyCodeLine{423         }
\DoxyCodeLine{424         \textcolor{keyword}{inline} \textcolor{keywordtype}{size\_t} send (\textcolor{keyword}{const} \textcolor{keywordtype}{void} *buf\_, \textcolor{keywordtype}{size\_t} len\_, \textcolor{keywordtype}{int} flags\_ = 0)}
\DoxyCodeLine{425         \{}
\DoxyCodeLine{426             \textcolor{keywordtype}{int} nbytes = zmq\_send (ptr, buf\_, len\_, flags\_);}
\DoxyCodeLine{427             \textcolor{keywordflow}{if} (nbytes >= 0)}
\DoxyCodeLine{428                 \textcolor{keywordflow}{return} (\textcolor{keywordtype}{size\_t}) nbytes;}
\DoxyCodeLine{429             \textcolor{keywordflow}{if} (zmq\_errno () == EAGAIN)}
\DoxyCodeLine{430                 \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{431             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} ();}
\DoxyCodeLine{432         \}}
\DoxyCodeLine{433 }
\DoxyCodeLine{434         \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} send (\mbox{\hyperlink{classzmq_1_1message__t}{message\_t}} \&msg\_, \textcolor{keywordtype}{int} flags\_ = 0)}
\DoxyCodeLine{435         \{}
\DoxyCodeLine{436             \textcolor{keywordtype}{int} nbytes = zmq\_msg\_send (\&(msg\_.msg), ptr, flags\_);}
\DoxyCodeLine{437             \textcolor{keywordflow}{if} (nbytes >= 0)}
\DoxyCodeLine{438                 \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{439             \textcolor{keywordflow}{if} (zmq\_errno () == EAGAIN)}
\DoxyCodeLine{440                 \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{441             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} ();}
\DoxyCodeLine{442         \}}
\DoxyCodeLine{443 }
\DoxyCodeLine{444 \textcolor{preprocessor}{\#ifdef ZMQ\_HAS\_RVALUE\_REFS}}
\DoxyCodeLine{445         \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} send (\mbox{\hyperlink{classzmq_1_1message__t}{message\_t}} \&\&msg\_, \textcolor{keywordtype}{int} flags\_ = 0)}
\DoxyCodeLine{446         \{}
\DoxyCodeLine{447             \textcolor{keywordflow}{return} send(msg\_, flags\_);}
\DoxyCodeLine{448         \}}
\DoxyCodeLine{449 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{450 }
\DoxyCodeLine{451         \textcolor{keyword}{inline} \textcolor{keywordtype}{size\_t} recv (\textcolor{keywordtype}{void} *buf\_, \textcolor{keywordtype}{size\_t} len\_, \textcolor{keywordtype}{int} flags\_ = 0)}
\DoxyCodeLine{452         \{}
\DoxyCodeLine{453             \textcolor{keywordtype}{int} nbytes = zmq\_recv (ptr, buf\_, len\_, flags\_);}
\DoxyCodeLine{454             \textcolor{keywordflow}{if} (nbytes >= 0)}
\DoxyCodeLine{455                 \textcolor{keywordflow}{return} (\textcolor{keywordtype}{size\_t}) nbytes;}
\DoxyCodeLine{456             \textcolor{keywordflow}{if} (zmq\_errno () == EAGAIN)}
\DoxyCodeLine{457                 \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{458             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} ();}
\DoxyCodeLine{459         \}}
\DoxyCodeLine{460 }
\DoxyCodeLine{461         \textcolor{keyword}{inline} \textcolor{keywordtype}{bool} recv (\mbox{\hyperlink{classzmq_1_1message__t}{message\_t}} *msg\_, \textcolor{keywordtype}{int} flags\_ = 0)}
\DoxyCodeLine{462         \{}
\DoxyCodeLine{463             \textcolor{keywordtype}{int} nbytes = zmq\_msg\_recv (\&(msg\_-\/>msg), ptr, flags\_);}
\DoxyCodeLine{464             \textcolor{keywordflow}{if} (nbytes >= 0)}
\DoxyCodeLine{465                 \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{466             \textcolor{keywordflow}{if} (zmq\_errno () == EAGAIN)}
\DoxyCodeLine{467                 \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{468             \textcolor{keywordflow}{throw} \mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} ();}
\DoxyCodeLine{469         \}}
\DoxyCodeLine{470         }
\DoxyCodeLine{471     \textcolor{keyword}{private}:}
\DoxyCodeLine{472         \textcolor{keywordtype}{void} *ptr;}
\DoxyCodeLine{473         \textcolor{keywordtype}{void} *ctxptr;}
\DoxyCodeLine{474 }
\DoxyCodeLine{475         \mbox{\hyperlink{classzmq_1_1socket__t}{socket\_t}} (\textcolor{keyword}{const} \mbox{\hyperlink{classzmq_1_1socket__t}{socket\_t}}\&) ZMQ\_DELETED\_FUNCTION;}
\DoxyCodeLine{476         \textcolor{keywordtype}{void} operator = (\textcolor{keyword}{const} \mbox{\hyperlink{classzmq_1_1socket__t}{socket\_t}}\&) ZMQ\_DELETED\_FUNCTION;}
\DoxyCodeLine{477     \};}
\DoxyCodeLine{478 }
\DoxyCodeLine{479     \textcolor{keyword}{class }\mbox{\hyperlink{classzmq_1_1monitor__t}{monitor\_t}}}
\DoxyCodeLine{480     \{}
\DoxyCodeLine{481     \textcolor{keyword}{public}:}
\DoxyCodeLine{482         \mbox{\hyperlink{classzmq_1_1monitor__t}{monitor\_t}}() : socketPtr(NULL) \{\}}
\DoxyCodeLine{483         \textcolor{keyword}{virtual} \mbox{\hyperlink{classzmq_1_1monitor__t}{\string~monitor\_t}}() \{\}}
\DoxyCodeLine{484 }
\DoxyCodeLine{485         \textcolor{keywordtype}{void} monitor(\mbox{\hyperlink{classzmq_1_1socket__t}{socket\_t}} \&socket, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *addr\_, \textcolor{keywordtype}{int} events = ZMQ\_EVENT\_ALL)}
\DoxyCodeLine{486         \{}
\DoxyCodeLine{487             \textcolor{keywordtype}{int} rc = zmq\_socket\_monitor(socket.ptr, addr\_, events);}
\DoxyCodeLine{488             \textcolor{keywordflow}{if} (rc != 0)}
\DoxyCodeLine{489                 \textcolor{keywordflow}{throw} \mbox{\hyperlink{classzmq_1_1error__t}{error\_t}} ();}
\DoxyCodeLine{490 }
\DoxyCodeLine{491             socketPtr = socket.ptr;}
\DoxyCodeLine{492             \textcolor{keywordtype}{void} *s = zmq\_socket (socket.ctxptr, ZMQ\_PAIR);}
\DoxyCodeLine{493             assert (s);}
\DoxyCodeLine{494 }
\DoxyCodeLine{495             rc = zmq\_connect (s, addr\_);}
\DoxyCodeLine{496             assert (rc == 0);}
\DoxyCodeLine{497             }
\DoxyCodeLine{498             on\_monitor\_started();}
\DoxyCodeLine{499             }
\DoxyCodeLine{500             \textcolor{keywordflow}{while} (\textcolor{keyword}{true}) \{}
\DoxyCodeLine{501                 zmq\_msg\_t eventMsg;}
\DoxyCodeLine{502                 zmq\_msg\_init (\&eventMsg);}
\DoxyCodeLine{503                 rc = zmq\_recvmsg (s, \&eventMsg, 0);}
\DoxyCodeLine{504                 \textcolor{keywordflow}{if} (rc == -\/1 \&\& zmq\_errno() == ETERM)}
\DoxyCodeLine{505                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{506                 assert (rc != -\/1);}
\DoxyCodeLine{507 \textcolor{preprocessor}{\#if ZMQ\_VERSION\_MAJOR >= 4}}
\DoxyCodeLine{508                 \textcolor{keyword}{const} \textcolor{keywordtype}{char}* data = \textcolor{keyword}{static\_cast<}\textcolor{keyword}{const }\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(zmq\_msg\_data(\&eventMsg));}
\DoxyCodeLine{509                 \mbox{\hyperlink{structzmq__event__t}{zmq\_event\_t}} msgEvent;}
\DoxyCodeLine{510                 memcpy(\&msgEvent.event, data, \textcolor{keyword}{sizeof}(uint16\_t)); data += \textcolor{keyword}{sizeof}(uint16\_t);}
\DoxyCodeLine{511                 memcpy(\&msgEvent.value, data, \textcolor{keyword}{sizeof}(int32\_t));}
\DoxyCodeLine{512                 \mbox{\hyperlink{structzmq__event__t}{zmq\_event\_t}}* \textcolor{keyword}{event} = \&msgEvent;}
\DoxyCodeLine{513 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{514                 \mbox{\hyperlink{structzmq__event__t}{zmq\_event\_t}}* \textcolor{keyword}{event} = \textcolor{keyword}{static\_cast<}\mbox{\hyperlink{structzmq__event__t}{zmq\_event\_t}}*\textcolor{keyword}{>}(zmq\_msg\_data(\&eventMsg));}
\DoxyCodeLine{515 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{516                 }
\DoxyCodeLine{517 \textcolor{preprocessor}{\#ifdef ZMQ\_NEW\_MONITOR\_EVENT\_LAYOUT}}
\DoxyCodeLine{518                 zmq\_msg\_t addrMsg;}
\DoxyCodeLine{519                 zmq\_msg\_init (\&addrMsg);}
\DoxyCodeLine{520                 rc = zmq\_recvmsg (s, \&addrMsg, 0);}
\DoxyCodeLine{521                 \textcolor{keywordflow}{if} (rc == -\/1 \&\& zmq\_errno() == ETERM)}
\DoxyCodeLine{522                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{523                 assert (rc != -\/1);}
\DoxyCodeLine{524                 \textcolor{keyword}{const} \textcolor{keywordtype}{char}* str = \textcolor{keyword}{static\_cast<}\textcolor{keyword}{const }\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(zmq\_msg\_data (\&addrMsg));}
\DoxyCodeLine{525                 std::string address(str, str + zmq\_msg\_size(\&addrMsg));}
\DoxyCodeLine{526                 zmq\_msg\_close (\&addrMsg);}
\DoxyCodeLine{527 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{528                 \textcolor{comment}{// Bit of a hack, but all events in the zmq\_event\_t union have the same layout so this will work for all event types.}}
\DoxyCodeLine{529                 std::string address = \textcolor{keyword}{event}-\/>data.connected.addr;}
\DoxyCodeLine{530 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{531 }
\DoxyCodeLine{532 \textcolor{preprocessor}{\#ifdef ZMQ\_EVENT\_MONITOR\_STOPPED}}
\DoxyCodeLine{533                 \textcolor{keywordflow}{if} (event-\/>event == ZMQ\_EVENT\_MONITOR\_STOPPED)}
\DoxyCodeLine{534                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{535 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{536 }
\DoxyCodeLine{537                 \textcolor{keywordflow}{switch} (event-\/>event) \{}
\DoxyCodeLine{538                 \textcolor{keywordflow}{case} ZMQ\_EVENT\_CONNECTED:}
\DoxyCodeLine{539                     on\_event\_connected(*event, address.c\_str());}
\DoxyCodeLine{540                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{541                 \textcolor{keywordflow}{case} ZMQ\_EVENT\_CONNECT\_DELAYED:}
\DoxyCodeLine{542                     on\_event\_connect\_delayed(*event, address.c\_str());}
\DoxyCodeLine{543                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{544                 \textcolor{keywordflow}{case} ZMQ\_EVENT\_CONNECT\_RETRIED:}
\DoxyCodeLine{545                     on\_event\_connect\_retried(*event, address.c\_str());}
\DoxyCodeLine{546                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{547                 \textcolor{keywordflow}{case} ZMQ\_EVENT\_LISTENING:}
\DoxyCodeLine{548                     on\_event\_listening(*event, address.c\_str());}
\DoxyCodeLine{549                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{550                 \textcolor{keywordflow}{case} ZMQ\_EVENT\_BIND\_FAILED:}
\DoxyCodeLine{551                     on\_event\_bind\_failed(*event, address.c\_str());}
\DoxyCodeLine{552                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{553                 \textcolor{keywordflow}{case} ZMQ\_EVENT\_ACCEPTED:}
\DoxyCodeLine{554                     on\_event\_accepted(*event, address.c\_str());}
\DoxyCodeLine{555                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{556                 \textcolor{keywordflow}{case} ZMQ\_EVENT\_ACCEPT\_FAILED:}
\DoxyCodeLine{557                     on\_event\_accept\_failed(*event, address.c\_str());}
\DoxyCodeLine{558                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{559                 \textcolor{keywordflow}{case} ZMQ\_EVENT\_CLOSED:}
\DoxyCodeLine{560                     on\_event\_closed(*event, address.c\_str());}
\DoxyCodeLine{561                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{562                 \textcolor{keywordflow}{case} ZMQ\_EVENT\_CLOSE\_FAILED:}
\DoxyCodeLine{563                     on\_event\_close\_failed(*event, address.c\_str());}
\DoxyCodeLine{564                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{565                 \textcolor{keywordflow}{case} ZMQ\_EVENT\_DISCONNECTED:}
\DoxyCodeLine{566                     on\_event\_disconnected(*event, address.c\_str());}
\DoxyCodeLine{567                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{568                 \textcolor{keywordflow}{default}:}
\DoxyCodeLine{569                     on\_event\_unknown(*event, address.c\_str());}
\DoxyCodeLine{570                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{571                 \}}
\DoxyCodeLine{572                 zmq\_msg\_close (\&eventMsg);}
\DoxyCodeLine{573             \}}
\DoxyCodeLine{574             zmq\_close (s);}
\DoxyCodeLine{575             socketPtr = NULL;}
\DoxyCodeLine{576         \}}
\DoxyCodeLine{577 }
\DoxyCodeLine{578 \textcolor{preprocessor}{\#ifdef ZMQ\_EVENT\_MONITOR\_STOPPED}}
\DoxyCodeLine{579         \textcolor{keywordtype}{void} abort()}
\DoxyCodeLine{580         \{}
\DoxyCodeLine{581             \textcolor{keywordflow}{if} (socketPtr)}
\DoxyCodeLine{582                 zmq\_socket\_monitor(socketPtr, NULL, 0);}
\DoxyCodeLine{583         \}}
\DoxyCodeLine{584 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{585         \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} on\_monitor\_started() \{\}}
\DoxyCodeLine{586         \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} on\_event\_connected(\textcolor{keyword}{const} \mbox{\hyperlink{structzmq__event__t}{zmq\_event\_t}} \&event\_, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* addr\_) \{ (void)event\_; (void)addr\_; \}}
\DoxyCodeLine{587         \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} on\_event\_connect\_delayed(\textcolor{keyword}{const} \mbox{\hyperlink{structzmq__event__t}{zmq\_event\_t}} \&event\_, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* addr\_) \{ (void)event\_; (void)addr\_; \}}
\DoxyCodeLine{588         \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} on\_event\_connect\_retried(\textcolor{keyword}{const} \mbox{\hyperlink{structzmq__event__t}{zmq\_event\_t}} \&event\_, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* addr\_) \{ (void)event\_; (void)addr\_; \}}
\DoxyCodeLine{589         \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} on\_event\_listening(\textcolor{keyword}{const} \mbox{\hyperlink{structzmq__event__t}{zmq\_event\_t}} \&event\_, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* addr\_) \{ (void)event\_; (void)addr\_; \}}
\DoxyCodeLine{590         \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} on\_event\_bind\_failed(\textcolor{keyword}{const} \mbox{\hyperlink{structzmq__event__t}{zmq\_event\_t}} \&event\_, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* addr\_) \{ (void)event\_; (void)addr\_; \}}
\DoxyCodeLine{591         \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} on\_event\_accepted(\textcolor{keyword}{const} \mbox{\hyperlink{structzmq__event__t}{zmq\_event\_t}} \&event\_, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* addr\_) \{ (void)event\_; (void)addr\_; \}}
\DoxyCodeLine{592         \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} on\_event\_accept\_failed(\textcolor{keyword}{const} \mbox{\hyperlink{structzmq__event__t}{zmq\_event\_t}} \&event\_, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* addr\_) \{ (void)event\_; (void)addr\_; \}}
\DoxyCodeLine{593         \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} on\_event\_closed(\textcolor{keyword}{const} \mbox{\hyperlink{structzmq__event__t}{zmq\_event\_t}} \&event\_, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* addr\_) \{ (void)event\_; (void)addr\_; \}}
\DoxyCodeLine{594         \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} on\_event\_close\_failed(\textcolor{keyword}{const} \mbox{\hyperlink{structzmq__event__t}{zmq\_event\_t}} \&event\_, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* addr\_) \{ (void)event\_; (void)addr\_; \}}
\DoxyCodeLine{595         \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} on\_event\_disconnected(\textcolor{keyword}{const} \mbox{\hyperlink{structzmq__event__t}{zmq\_event\_t}} \&event\_, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* addr\_) \{ (void)event\_; (void)addr\_; \}}
\DoxyCodeLine{596         \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} on\_event\_unknown(\textcolor{keyword}{const} \mbox{\hyperlink{structzmq__event__t}{zmq\_event\_t}} \&event\_, \textcolor{keyword}{const} \textcolor{keywordtype}{char}* addr\_) \{ (void)event\_; (void)addr\_; \}}
\DoxyCodeLine{597     \textcolor{keyword}{private}:}
\DoxyCodeLine{598         \textcolor{keywordtype}{void}* socketPtr;}
\DoxyCodeLine{599     \};}
\DoxyCodeLine{600 \}}
\DoxyCodeLine{601 }
\DoxyCodeLine{602 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
